-- Warpah ServerHop - Professional Edition
-- Enhanced Admin Detection System

local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local GroupService = game:GetService("GroupService")

-- UI Components
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local HeaderFrame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local Subtitle = Instance.new("TextLabel")
local MinimizeBtn = Instance.new("TextButton")
local CloseBtn = Instance.new("TextButton")
local ContentFrame = Instance.new("Frame")
local StatusFrame = Instance.new("Frame")
local StatusLabel = Instance.new("TextLabel")
local StatsFrame = Instance.new("Frame")
local TotalServersLabel = Instance.new("TextLabel")
local SafeServersLabel = Instance.new("TextLabel")
local DangerServersLabel = Instance.new("TextLabel")
local ScrollFrame = Instance.new("ScrollingFrame")
local ButtonFrame = Instance.new("Frame")
local ScanBtn = Instance.new("TextButton")
local RefreshBtn = Instance.new("TextButton")

-- Properties
ScreenGui.Parent = game.CoreGui
ScreenGui.Name = "WarpahServerHop"
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.ResetOnSpawn = false

-- Main Frame - Professional Design
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 28)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.5, -165, 0.5, -220)
MainFrame.Size = UDim2.new(0, 330, 0, 440)
MainFrame.Active = true
MainFrame.Draggable = true

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 12)
MainCorner.Parent = MainFrame

local MainStroke = Instance.new("UIStroke")
MainStroke.Color = Color3.fromRGB(60, 60, 80)
MainStroke.Thickness = 1.5
MainStroke.Parent = MainFrame

-- Header Frame
HeaderFrame.Parent = MainFrame
HeaderFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 42)
HeaderFrame.BorderSizePixel = 0
HeaderFrame.Size = UDim2.new(1, 0, 0, 70)

local HeaderCorner = Instance.new("UICorner")
HeaderCorner.CornerRadius = UDim.new(0, 12)
HeaderCorner.Parent = HeaderFrame

local HeaderGradient = Instance.new("UIGradient")
HeaderGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(40, 40, 55)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(30, 30, 42))
}
HeaderGradient.Rotation = 90
HeaderGradient.Parent = HeaderFrame

-- Title
Title.Parent = HeaderFrame
Title.BackgroundTransparency = 1
Title.Position = UDim2.new(0, 15, 0, 12)
Title.Size = UDim2.new(1, -100, 0, 25)
Title.Font = Enum.Font.GothamBold
Title.Text = "WARPAH SERVERHOP"
Title.TextColor3 = Color3.fromRGB(100, 200, 255)
Title.TextSize = 18
Title.TextXAlignment = Enum.TextXAlignment.Left

-- Subtitle
Subtitle.Parent = HeaderFrame
Subtitle.BackgroundTransparency = 1
Subtitle.Position = UDim2.new(0, 15, 0, 38)
Subtitle.Size = UDim2.new(1, -100, 0, 20)
Subtitle.Font = Enum.Font.Gotham
Subtitle.Text = "Advanced Admin Detection System"
Subtitle.TextColor3 = Color3.fromRGB(150, 150, 170)
Subtitle.TextSize = 11
Subtitle.TextXAlignment = Enum.TextXAlignment.Left

-- Minimize Button
MinimizeBtn.Parent = HeaderFrame
MinimizeBtn.BackgroundColor3 = Color3.fromRGB(255, 200, 80)
MinimizeBtn.BorderSizePixel = 0
MinimizeBtn.Position = UDim2.new(1, -70, 0, 20)
MinimizeBtn.Size = UDim2.new(0, 30, 0, 30)
MinimizeBtn.Font = Enum.Font.GothamBold
MinimizeBtn.Text = "‚Äî"
MinimizeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeBtn.TextSize = 16
MinimizeBtn.AutoButtonColor = false

local MinCorner = Instance.new("UICorner")
MinCorner.CornerRadius = UDim.new(0, 8)
MinCorner.Parent = MinimizeBtn

-- Close Button
CloseBtn.Parent = HeaderFrame
CloseBtn.BackgroundColor3 = Color3.fromRGB(255, 80, 100)
CloseBtn.BorderSizePixel = 0
CloseBtn.Position = UDim2.new(1, -35, 0, 20)
CloseBtn.Size = UDim2.new(0, 30, 0, 30)
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.Text = "√ó"
CloseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseBtn.TextSize = 20
CloseBtn.AutoButtonColor = false

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 8)
CloseCorner.Parent = CloseBtn

-- Content Frame
ContentFrame.Parent = MainFrame
ContentFrame.BackgroundTransparency = 1
ContentFrame.Position = UDim2.new(0, 0, 0, 70)
ContentFrame.Size = UDim2.new(1, 0, 1, -70)

-- Status Frame
StatusFrame.Parent = ContentFrame
StatusFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 42)
StatusFrame.BorderSizePixel = 0
StatusFrame.Position = UDim2.new(0, 12, 0, 12)
StatusFrame.Size = UDim2.new(1, -24, 0, 35)

local StatusCorner = Instance.new("UICorner")
StatusCorner.CornerRadius = UDim.new(0, 8)
StatusCorner.Parent = StatusFrame

local StatusStroke = Instance.new("UIStroke")
StatusStroke.Color = Color3.fromRGB(50, 50, 65)
StatusStroke.Thickness = 1
StatusStroke.Parent = StatusFrame

-- Status Label
StatusLabel.Parent = StatusFrame
StatusLabel.BackgroundTransparency = 1
StatusLabel.Position = UDim2.new(0, 12, 0, 0)
StatusLabel.Size = UDim2.new(1, -24, 1, 0)
StatusLabel.Font = Enum.Font.GothamMedium
StatusLabel.Text = "üîç Ready to scan servers"
StatusLabel.TextColor3 = Color3.fromRGB(180, 180, 200)
StatusLabel.TextSize = 11
StatusLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Stats Frame
StatsFrame.Parent = ContentFrame
StatsFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 42)
StatsFrame.BorderSizePixel = 0
StatsFrame.Position = UDim2.new(0, 12, 0, 55)
StatsFrame.Size = UDim2.new(1, -24, 0, 50)

local StatsCorner = Instance.new("UICorner")
StatsCorner.CornerRadius = UDim.new(0, 8)
StatsCorner.Parent = StatsFrame

local StatsStroke = Instance.new("UIStroke")
StatsStroke.Color = Color3.fromRGB(50, 50, 65)
StatsStroke.Thickness = 1
StatsStroke.Parent = StatsFrame

-- Total Servers Label
TotalServersLabel.Parent = StatsFrame
TotalServersLabel.BackgroundTransparency = 1
TotalServersLabel.Position = UDim2.new(0, 12, 0, 8)
TotalServersLabel.Size = UDim2.new(0.33, -8, 0, 34)
TotalServersLabel.Font = Enum.Font.GothamBold
TotalServersLabel.Text = "0\nTotal"
TotalServersLabel.TextColor3 = Color3.fromRGB(150, 150, 170)
TotalServersLabel.TextSize = 13

-- Safe Servers Label
SafeServersLabel.Parent = StatsFrame
SafeServersLabel.BackgroundTransparency = 1
SafeServersLabel.Position = UDim2.new(0.33, 4, 0, 8)
SafeServersLabel.Size = UDim2.new(0.33, -8, 0, 34)
SafeServersLabel.Font = Enum.Font.GothamBold
SafeServersLabel.Text = "0\n‚úÖ Safe"
SafeServersLabel.TextColor3 = Color3.fromRGB(100, 220, 150)
SafeServersLabel.TextSize = 13

-- Danger Servers Label
DangerServersLabel.Parent = StatsFrame
DangerServersLabel.BackgroundTransparency = 1
DangerServersLabel.Position = UDim2.new(0.66, 4, 0, 8)
DangerServersLabel.Size = UDim2.new(0.34, -16, 0, 34)
DangerServersLabel.Font = Enum.Font.GothamBold
DangerServersLabel.Text = "0\n‚ö†Ô∏è Danger"
DangerServersLabel.TextColor3 = Color3.fromRGB(255, 100, 120)
DangerServersLabel.TextSize = 13

-- Scroll Frame
ScrollFrame.Parent = ContentFrame
ScrollFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
ScrollFrame.BorderSizePixel = 0
ScrollFrame.Position = UDim2.new(0, 12, 0, 113)
ScrollFrame.Size = UDim2.new(1, -24, 0, 195)
ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
ScrollFrame.ScrollBarThickness = 5
ScrollFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 200, 255)

local ScrollCorner = Instance.new("UICorner")
ScrollCorner.CornerRadius = UDim.new(0, 8)
ScrollCorner.Parent = ScrollFrame

local ScrollStroke = Instance.new("UIStroke")
ScrollStroke.Color = Color3.fromRGB(50, 50, 65)
ScrollStroke.Thickness = 1
ScrollStroke.Parent = ScrollFrame

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Parent = ScrollFrame
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Padding = UDim.new(0, 6)
UIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

local UIPadding = Instance.new("UIPadding")
UIPadding.Parent = ScrollFrame
UIPadding.PaddingTop = UDim.new(0, 8)
UIPadding.PaddingBottom = UDim.new(0, 8)

-- Button Frame
ButtonFrame.Parent = ContentFrame
ButtonFrame.BackgroundTransparency = 1
ButtonFrame.Position = UDim2.new(0, 12, 0, 316)
ButtonFrame.Size = UDim2.new(1, -24, 0, 42)

-- Scan Button
ScanBtn.Parent = ButtonFrame
ScanBtn.BackgroundColor3 = Color3.fromRGB(80, 150, 255)
ScanBtn.BorderSizePixel = 0
ScanBtn.Position = UDim2.new(0, 0, 0, 0)
ScanBtn.Size = UDim2.new(0.49, -3, 1, 0)
ScanBtn.Font = Enum.Font.GothamBold
ScanBtn.Text = "üîç SCAN SERVERS"
ScanBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
ScanBtn.TextSize = 12
ScanBtn.AutoButtonColor = false

local ScanCorner = Instance.new("UICorner")
ScanCorner.CornerRadius = UDim.new(0, 8)
ScanCorner.Parent = ScanBtn

local ScanGradient = Instance.new("UIGradient")
ScanGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(80, 150, 255)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(60, 120, 220))
}
ScanGradient.Rotation = 90
ScanGradient.Parent = ScanBtn

-- Refresh Button
RefreshBtn.Parent = ButtonFrame
RefreshBtn.BackgroundColor3 = Color3.fromRGB(100, 200, 150)
RefreshBtn.BorderSizePixel = 0
RefreshBtn.Position = UDim2.new(0.51, 3, 0, 0)
RefreshBtn.Size = UDim2.new(0.49, -3, 1, 0)
RefreshBtn.Font = Enum.Font.GothamBold
RefreshBtn.Text = "üîÑ REFRESH"
RefreshBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
RefreshBtn.TextSize = 12
RefreshBtn.AutoButtonColor = false

local RefreshCorner = Instance.new("UICorner")
RefreshCorner.CornerRadius = UDim.new(0, 8)
RefreshCorner.Parent = RefreshBtn

local RefreshGradient = Instance.new("UIGradient")
RefreshGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(100, 200, 150)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(80, 170, 120))
}
RefreshGradient.Rotation = 90
RefreshGradient.Parent = RefreshBtn

-- Variables
local minimized = false
local originalSize = MainFrame.Size
local LocalPlayer = Players.LocalPlayer
local scanning = false

-- Admin Keywords (lowercase)
local adminKeywords = {
    "owner", "admin", "administrator", "moderator", "mod", 
    "developer", "dev", "staff", "manager", "creator", 
    "founder", "executive", "operator", "overseer"
}

-- Notification System
local function Notify(title, text, duration)
    pcall(function()
        game.StarterGui:SetCore("SendNotification", {
            Title = title;
            Text = text;
            Duration = duration or 3;
        })
    end)
end

-- Enhanced Admin Detection
local function CheckForAdmin(userId, username)
    -- Method 1: Check if user is game creator
    if game.CreatorType == Enum.CreatorType.User and userId == game.CreatorId then
        return true, "Game Owner"
    end
    
    -- Method 2: Check group rank if game owned by group
    if game.CreatorType == Enum.CreatorType.Group then
        local success, groupInfo = pcall(function()
            return GroupService:GetGroupInfoAsync(game.CreatorId)
        end)
        
        if success and groupInfo then
            local playerInGroup = false
            local playerRank = 0
            
            pcall(function()
                local groups = GroupService:GetGroupsAsync(userId)
                for _, group in pairs(groups) do
                    if group.Id == game.CreatorId then
                        playerInGroup = true
                        playerRank = group.Rank
                    end
                end
            end)
            
            -- Rank 200+ usually indicates admin/mod position
            if playerInGroup and playerRank >= 200 then
                return true, "Group Admin (Rank " .. playerRank .. ")"
            end
        end
    end
    
    -- Method 3: Check username for admin keywords
    if username then
        local lowerUsername = string.lower(username)
        for _, keyword in pairs(adminKeywords) do
            if string.find(lowerUsername, keyword) then
                return true, "Username Contains '" .. keyword .. "'"
            end
        end
    end
    
    return false, nil
end

-- Get Username from UserId
local function GetUsername(userId)
    local success, result = pcall(function()
        return Players:GetNameFromUserIdAsync(userId)
    end)
    return success and result or "Unknown"
end

-- Clear Server List
local function ClearServerList()
    for _, child in pairs(ScrollFrame:GetChildren()) do
        if child:IsA("Frame") then
            child:Destroy()
        end
    end
end

-- Create Server Entry with Professional Design
local function CreateServerEntry(serverData, index)
    local adminList = {}
    local adminCount = 0
    local hasAdmin = false
    
    -- Check all players in server
    if serverData.playerIds then
        for _, playerId in pairs(serverData.playerIds) do
            local username = GetUsername(playerId)
            local isAdmin, reason = CheckForAdmin(playerId, username)
            
            if isAdmin then
                hasAdmin = true
                adminCount = adminCount + 1
                table.insert(adminList, {
                    name = username,
                    reason = reason
                })
            end
            
            wait(0.05) -- Prevent rate limiting
        end
    end
    
    local ServerFrame = Instance.new("Frame")
    ServerFrame.Parent = ScrollFrame
    ServerFrame.BackgroundColor3 = hasAdmin and Color3.fromRGB(45, 25, 30) or Color3.fromRGB(30, 40, 35)
    ServerFrame.BorderSizePixel = 0
    ServerFrame.Size = UDim2.new(0.97, 0, 0, hasAdmin and 110 or 85)
    
    local EntryCorner = Instance.new("UICorner")
    EntryCorner.CornerRadius = UDim.new(0, 8)
    EntryCorner.Parent = ServerFrame
    
    local EntryStroke = Instance.new("UIStroke")
    EntryStroke.Color = hasAdmin and Color3.fromRGB(255, 80, 100) or Color3.fromRGB(80, 220, 150)
    EntryStroke.Thickness = 2
    EntryStroke.Parent = ServerFrame
    
    -- Server Number Badge
    local NumberBadge = Instance.new("Frame")
    NumberBadge.Parent = ServerFrame
    NumberBadge.BackgroundColor3 = hasAdmin and Color3.fromRGB(255, 80, 100) or Color3.fromRGB(80, 150, 255)
    NumberBadge.BorderSizePixel = 0
    NumberBadge.Position = UDim2.new(0, 8, 0, 8)
    NumberBadge.Size = UDim2.new(0, 40, 0, 22)
    
    local BadgeCorner = Instance.new("UICorner")
    BadgeCorner.CornerRadius = UDim.new(0, 6)
    BadgeCorner.Parent = NumberBadge
    
    local NumberLabel = Instance.new("TextLabel")
    NumberLabel.Parent = NumberBadge
    NumberLabel.BackgroundTransparency = 1
    NumberLabel.Size = UDim2.new(1, 0, 1, 0)
    NumberLabel.Font = Enum.Font.GothamBold
    NumberLabel.Text = "#" .. index
    NumberLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    NumberLabel.TextSize = 11
    
    -- Player Info
    local InfoLabel = Instance.new("TextLabel")
    InfoLabel.Parent = ServerFrame
    InfoLabel.BackgroundTransparency = 1
    InfoLabel.Position = UDim2.new(0, 55, 0, 8)
    InfoLabel.Size = UDim2.new(1, -120, 0, 22)
    InfoLabel.Font = Enum.Font.GothamMedium
    InfoLabel.Text = string.format("üë• %d/%d Players  |  üì∂ %dms", 
        serverData.playing or 0, 
        serverData.maxPlayers or 0,
        serverData.ping or 0
    )
    InfoLabel.TextColor3 = Color3.fromRGB(200, 200, 220)
    InfoLabel.TextSize = 10
    InfoLabel.TextXAlignment = Enum.TextXAlignment.Left
    
    -- Status Frame
    local StatusBadge = Instance.new("Frame")
    StatusBadge.Parent = ServerFrame
    StatusBadge.BackgroundColor3 = hasAdmin and Color3.fromRGB(255, 60, 80) or Color3.fromRGB(60, 200, 120)
    StatusBadge.BorderSizePixel = 0
    StatusBadge.Position = UDim2.new(0, 8, 0, 38)
    StatusBadge.Size = UDim2.new(1, -70, 0, hasAdmin and 60 or 35)
    
    local StatusCorner = Instance.new("UICorner")
    StatusCorner.CornerRadius = UDim.new(0, 6)
    StatusCorner.Parent = StatusBadge
    
    local StatusText = Instance.new("TextLabel")
    StatusText.Parent = StatusBadge
    StatusText.BackgroundTransparency = 1
    StatusText.Position = UDim2.new(0, 10, 0, 5)
    StatusText.Size = UDim2.new(1, -20, 0, 25)
    StatusText.Font = Enum.Font.GothamBold
    StatusText.Text = hasAdmin and "‚ö†Ô∏è ADMIN DETECTED!" or "‚úÖ SAFE SERVER"
    StatusText.TextColor3 = Color3.fromRGB(255, 255, 255)
    StatusText.TextSize = 11
    StatusText.TextXAlignment = Enum.TextXAlignment.Left
    
    -- Admin Details
    if hasAdmin and #adminList > 0 then
        local AdminInfo = Instance.new("TextLabel")
        AdminInfo.Parent = StatusBadge
        AdminInfo.BackgroundTransparency = 1
        AdminInfo.Position = UDim2.new(0, 10, 0, 28)
        AdminInfo.Size = UDim2.new(1, -20, 0, 28)
        AdminInfo.Font = Enum.Font.Gotham
        AdminInfo.Text = string.format("Found %d admin(s):\n%s", 
            adminCount,
            adminList[1].name .. " - " .. adminList[1].reason
        )
        AdminInfo.TextColor3 = Color3.fromRGB(255, 200, 200)
        AdminInfo.TextSize = 8
        AdminInfo.TextXAlignment = Enum.TextXAlignment.Left
        AdminInfo.TextYAlignment = Enum.TextYAlignment.Top
    end
    
    -- Join Button
    local JoinBtn = Instance.new("TextButton")
    JoinBtn.Parent = ServerFrame
    JoinBtn.BackgroundColor3 = hasAdmin and Color3.fromRGB(200, 60, 80) or Color3.fromRGB(60, 180, 120)
    JoinBtn.BorderSizePixel = 0
    JoinBtn.Position = UDim2.new(1, -54, 0, 8)
    JoinBtn.Size = UDim2.new(0, 46, 0, hasAdmin and 94 or 69)
    JoinBtn.Font = Enum.Font.GothamBold
    JoinBtn.Text = "JOIN"
    JoinBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    JoinBtn.TextSize = 11
    JoinBtn.AutoButtonColor = false
    
    local JoinCorner = Instance.new("UICorner")
    JoinCorner.CornerRadius = UDim.new(0, 8)
    JoinCorner.Parent = JoinBtn
    
    JoinBtn.MouseButton1Click:Connect(function()
        JoinBtn.Text = "..."
        JoinBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 120)
        
        local success, err = pcall(function()
            TeleportService:TeleportToPlaceInstance(serverData.placeId, serverData.id, LocalPlayer)
        end)
        
        if not success then
            JoinBtn.Text = "‚ùå"
            JoinBtn.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
            wait(1.5)
            JoinBtn.Text = "JOIN"
            JoinBtn.BackgroundColor3 = hasAdmin and Color3.fromRGB(200, 60, 80) or Color3.fromRGB(60, 180, 120)
        end
    end)
    
    return hasAdmin
end

-- Scan Servers with Enhanced Detection
local function ScanServers()
    if scanning then
        Notify("‚è≥ Wait", "Scan already in progress")
        return
    end
    
    scanning = true
    ClearServerList()
    
    StatusLabel.Text = "üîç Scanning servers..."
    ScanBtn.Text = "‚è≥ SCANNING..."
    ScanBtn.BackgroundColor3 = Color3.fromRGB(120, 120, 140)
    
    TotalServersLabel.Text = "0\nTotal"
    SafeServersLabel.Text = "0\n‚úÖ Safe"
    DangerServersLabel.Text = "0\n‚ö†Ô∏è Danger"
    
    local placeId = game.PlaceId
    local servers = {}
    local totalServers = 0
    local safeServers = 0
    local dangerServers = 0
    
    -- Fetch servers
    StatusLabel.Text = "üì° Fetching server list..."
    
    for attempt = 1, 3 do
        local success, result = pcall(function()
            return game:HttpGet(string.format(
                "https://games.roblox.com/v1/games/%d/servers/Public?sortOrder=Asc&limit=100",
                placeId
            ))
        end)
        
        if success then
            local decoded = HttpService:JSONDecode(result)
            if decoded.data then
                for _, server in pairs(decoded.data) do
                    if server.id ~= game.JobId then -- Skip current server
                        table.insert(servers, {
                            id = server.id,
                            placeId = placeId,
                            playing = server.playing,
                            maxPlayers = server.maxPlayers,
                            ping = server.ping or 0,
                            playerIds = server.playerIds
                        })
                    end
                end
            end
        end
        
        wait(0.2)
    end
    
    if #servers > 0 then
        totalServers = #servers
        StatusLabel.Text = string.format("üîç Scanning %d servers for admins...", totalServers)
        TotalServersLabel.Text = totalServers .. "\nTotal"
        
        -- Scan each server
        for index, serverData in pairs(servers) do
            local hasAdmin = CreateServerEntry(serverData, index)
            
            if hasAdmin then
                dangerServers = dangerServers + 1
            else
                safeServers = safeServers + 1
            end
            
            -- Update stats in real-time
            SafeServersLabel.Text = safeServers .. "\n‚úÖ Safe"
            DangerServersLabel.Text = dangerServers .. "\n‚ö†Ô∏è Danger"
            StatusLabel.Text = string.format("üîç Scanned %d/%d servers", index, totalServers)
            
            ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, UIListLayout.AbsoluteContentSize.Y + 16)
            
            wait(0.1)
        end
        
        StatusLabel.Text = string.format("‚úÖ Scan complete! Found %d safe servers", safeServers)
        Notify("‚úÖ Scan Complete", string.format("%d safe, %d with admin", safeServers, dangerServers), 4)
    else
        StatusLabel.Text = "‚ùå No servers found or API blocked"
        Notify("‚ö†Ô∏è Error", "Could not fetch servers", 3)
    end
    
    ScanBtn.Text = "üîç SCAN SERVERS"
    ScanBtn.BackgroundColor3 = Color3.fromRGB(80, 150, 255)
    scanning = false
end

-- Button Hover Effects
local function AddHoverEffect(button, normalColor, hoverColor)
    button.MouseEnter:Connect(function()
        button.BackgroundColor3 = hoverColor
    end)
    
    button.MouseLeave:Connect(function()
        button.BackgroundColor3 = normalColor
    end)
end

AddHoverEffect(MinimizeBtn, Color3.fromRGB(255, 200, 80), Color3.fromRGB(255, 220, 120))
AddHoverEffect(CloseBtn, Color3.fromRGB(255, 80, 100), Color3.fromRGB(255, 120, 140))
AddHoverEffect(ScanBtn, Color3.fromRGB(80, 150, 255), Color3.fromRGB(100, 170, 255))
AddHoverEffect(RefreshBtn, Color3.fromRGB(100, 200, 150), Color3.fromRGB(120, 220, 170))

-- Minimize Toggle
MinimizeBtn.MouseButton1Click:Connect(function()
    minimized = not minimized
    if minimized then
        MainFrame:TweenSize(UDim2.new(0, 330, 0, 70), "Out", "Quad", 0.3, true)
        ContentFrame.Visible = false
        MinimizeBtn.Text = "‚ñ°"
    else
        MainFrame:TweenSize(originalSize, "Out", "Quad", 0.3, true)
        ContentFrame.Visible = true
        MinimizeBtn.Text = "‚Äî"
    end
end)

-- Button Events
ScanBtn.MouseButton1Click:Connect(ScanServers)
RefreshBtn.MouseButton1Click:Connect(ScanServers)

CloseBtn.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

-- Startup
Notify("üöÄ Warpah ServerHop", "Advanced Admin Detection Loaded!", 3)
StatusLabel.Text = "üîç Click 'SCAN SERVERS' to begin"

print("=================================")
print("WARPAH SERVERHOP - Professional Edition")
print("Enhanced Admin Detection System")
print("=================================")
print("‚úÖ GUI Loaded Successfully")
print("üîç Ready to scan servers")
print("="..string.rep("=", 31))
